{% if salt.grains.has_value('subconfig') %}
  {{ salt.grains.setval('env_complete', grains.get('environment') + "_" + grains.get('subconfig')) }}
{% else %}
  {{ salt.grains.set('env_complete', grains.get('environment')) }}
{% endif %}

{% set props = salt['grains.filter_by'](
{
  'default':{
    'rails_env': 'development',
    'ned_service': 'http://localhost:8888/v1/',
    'cas_url': 'https://localhost:8880',
    'mailer_address': 'localhost',
    'mailer_port': '1025',
    'salesforce_host': 'test.salesforce.com',
    'salesforce_user': 'akitaintegration@plos.org.plostest2'
  },
  'vagrant': {
    'ned_service': 'http://ned.vagrant.local:8080/v1/',
    'cas_url': 'http://nedcas.vagrant.local:8080',
  },
  'vagrant_nedcasakita': {
    'ned_service': 'http://localhost:8888/v1/',
    'cas_url': 'http://nedcasakita.vagrant.local:8880'
  },
  'dev': {
    'ned_service': 'http://ned-201.soma.plos.org:8080/v1/',
    'cas_url': 'https://nedcas-dev.plos.org'
  },
  'qa': {
    'rails_env': 'integration',
    'ned_service': 'http://ned-301.soma.plos.org:8080/v1/',
    'cas_url': 'https://nedcas-qa.plos.org'
  },
  'qa_nedcasakita': {
    'rails_env': 'integration',
    'ned_service': 'http://localhost:8080/v1/',
    'cas_url': 'https://nedcas-integration.plos.org'
  },
  'stage': {
    'rails_env': 'integration',
    'ned_service': 'http://ned-401.soma.plos.org:8080/v1/',
    'cas_url': 'https://nedcas-stage.plos.org',
    'mailer_address': 'plos-org.mail.protection.outlook.com',
    'mailer_port': '25'
  },
  'prod': {
    'rails_env': 'production',
    'ned_service': 'http://ned.soma.plos.org/v1',
    'cas_url': 'https://register.plos.org',
    'mailer_address': 'plos-org.mail.protection.outlook.com',
    'mailer_port': '25',
    'salesforce_host': 'login.salesforce.com',
    'salesforce_user': 'akitaintegration@plos.org'
  }
}
, grain='env_complete', base='default') %}
